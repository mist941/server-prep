---
- name: Test server preparation roles
  hosts: localhost
  connection: local
  gather_facts: true
  vars:
    NEW_USER: testuser
    NEW_USER_PASSWORD: testpassword
    SSH_PUB_KEY: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC... test@example.com"
    TIMEZONE: "UTC"

  tasks:
    - name: Test system_updates role in check mode
      ansible.builtin.include_role:
        name: system_updates
      check_mode: true

    - name: Test time_configuration role in check mode
      ansible.builtin.include_role:
        name: time_configuration
      check_mode: true

    - name: Test packages_installation role in check mode
      ansible.builtin.include_role:
        name: packages_installation
      check_mode: true

    - name: Test vim_setup role in check mode
      ansible.builtin.include_role:
        name: vim_setup
      check_mode: true

    - name: Test bash_config role in check mode
      ansible.builtin.include_role:
        name: bash_config
      check_mode: true
