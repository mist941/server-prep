- name: Check if vim is installed
  command: which vim
  register: vim_check
  ignore_errors: yes
  changed_when: false

- name: Install vim
  package:
    name: vim
    state: present
  when: vim_check.rc != 0